<!DOCTYPE html>
<html>
   <head>
      <style>
         td.SO {
         font-family: 'Lato', sans-serif;
         color: #138D75;
         font-size: 17px;}
         div.GH {
         margin-left: 25px;
         margin-right: 25px;
         margin-bottom: 10px;
         }
      </style>
      <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
      <!--For Font -->
      <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
      <script>
         var data_xyz = {{ custom_data|tojson }};

         $(document).ready(function(){

           var repo_data = '';

           $.each($.parseJSON(data_xyz), function(key, value){
             repo_data += '<div class="card w-auto h-auto" class = "GH" align = "center" style = "margin-bottom: 25px">';
             repo_data += '<tr>';
             repo_data += '<td> <div class="card-header">' +value.author+ '</div>';
             repo_data += '<div class="card-body">'
             repo_data += '<h5 class="card-title">' +value.name+ '</h5>';
             repo_data += '<p class="card-text">' +value.description+ '</p>';
             repo_data += '<a href = "' +value.url+ '" target = "_blank" class="btn btn-outline-primary">Repository Link</a>';
             repo_data += '</div>';
             repo_data += '</td>';
             repo_data += '</tr>';
             repo_data += '</div>';
           });
           $('#GHData').append(repo_data);

           var stack_data = JSON.parse('{"Top_Users": [{"Profile_ID": 1221571, "display_name": "Eran", "link": "https://stackoverflow.com/users/1221571/eran", "Score": 13.537934310064092, "Response_Time": 0.7574434980468856, "Popularity": 1.2842529172852035, "last_activity": 135}, {"Profile_ID": 1392277, "display_name": "LppEdd", "link": "https://stackoverflow.com/users/1392277/lppedd", "Score": 2.7178019009853664, "Response_Time": -0.7896344619213295, "Popularity": 1.5411035007422442, "last_activity": 62}, {"Profile_ID": 1602555, "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki", "Score": -2.1990574826660896, "Response_Time": -0.2315254009988022, "Popularity": -0.2568505834570407, "last_activity": 120}, {"Profile_ID": 5772882, "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v", "Score": -8.097122223884675, "Response_Time": -0.14591556509729106, "Popularity": -1.797954084199285, "last_activity": 160}, {"Profile_ID": 7606764, "display_name": "Andronicus", "link": "https://stackoverflow.com/users/7606764/andronicus", "Score": -11.004866761225461, "Response_Time": -1.1115626896777782, "Popularity": -1.5411035007422442, "last_activity": 156}, {"Profile_ID": 1531124, "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat", "Score": 4.777237504261824, "Response_Time": 1.650771930311561, "Popularity": 0.0, "last_activity": 224}, {"Profile_ID": 5515060, "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino", "Score": -4.70887207745273, "Response_Time": -0.10993095565226021, "Popularity": -0.5137011669140814, "last_activity": 68}, {"Profile_ID": 9662601, "display_name": "Samuel Philipp", "link": "https://stackoverflow.com/users/9662601/samuel-philipp", "Score": -4.419261402631584, "Response_Time": -0.4063253165145596, "Popularity": 0.0, "last_activity": 8}, {"Profile_ID": 5108737, "display_name": "Ruslan", "link": "https://stackoverflow.com/users/5108737/ruslan", "Score": -11.944458076318892, "Response_Time": -1.2318633397885652, "Popularity": -1.2842529172852035, "last_activity": 52}, {"Profile_ID": 5221149, "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas", "Score": 8.732676711269262, "Response_Time": -0.7125272401122645, "Popularity": 1.797954084199285, "last_activity": 1026}, {"Profile_ID": 51591, "display_name": "Micha\u0142 Ziober", "link": "https://stackoverflow.com/users/51591/micha%c5%82-ziober", "Score": 0.8010089088537797, "Response_Time": -0.17533453550110661, "Popularity": 1.0274023338281628, "last_activity": 25}, {"Profile_ID": 5761558, "display_name": "ernest_k", "link": "https://stackoverflow.com/users/5761558/ernest-k", "Score": -2.474552154364564, "Response_Time": 0.11351640428835802, "Popularity": -0.2568505834570407, "last_activity": 168}, {"Profile_ID": 1746118, "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman", "Score": 1.9072484484102468, "Response_Time": 1.3264345665988793, "Popularity": -0.2568505834570407, "last_activity": 247}, {"Profile_ID": 139985, "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c", "Score": 23.404996341050907, "Response_Time": 2.7036312636286457, "Popularity": 0.2568505834570407, "last_activity": 452}, {"Profile_ID": 2970947, "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch", "Score": -2.299239540644431, "Response_Time": -0.2390204906404163, "Popularity": 0.0, "last_activity": 15}, {"Profile_ID": 1059372, "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene", "Score": -3.1815652985056424, "Response_Time": 0.33744707854118355, "Popularity": -0.7705517503711221, "last_activity": 149}, {"Profile_ID": 6139527, "display_name": "Nicholas K", "link": "https://stackoverflow.com/users/6139527/nicholas-k", "Score": -6.992330560436634, "Response_Time": -0.4626425872939094, "Popularity": -0.7705517503711221, "last_activity": 216}, {"Profile_ID": 8534008, "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett", "Score": -0.8893820981168832, "Response_Time": 0.5832309953105801, "Popularity": 0.2568505834570407, "last_activity": 8}, {"Profile_ID": 3788176, "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner", "Score": 1.2034651290247962, "Response_Time": -0.9743088606157211, "Popularity": 1.2842529172852035, "last_activity": 154}, {"Profile_ID": 11173046, "display_name": "Not a JD", "link": "https://stackoverflow.com/users/11173046/not-a-jd", "Score": 1.1283384223273167, "Response_Time": -0.8818842929120879, "Popularity": 0.0, "last_activity": 1417}]}');

            console.log(stack_data.Top_Users[0])
                 var user_data = '';

           for ( var k=0;k<5;k++)
           {

             console.log('hello')
             user_data += '<tr class="list-group-item list-group-item-action">';
             user_data += '<td class = "SO">';
             user_data += 'Profile Name: <b>' + stack_data.Top_Users[k].display_name+ '</b>';
             user_data += '</br>';
             user_data += 'Cumulative Score: <b>' + stack_data.Top_Users[k].Score+ '</b>';
             user_data += '</br>';
             user_data += 'Profile Popularity: <b>' + Math.abs(stack_data.Top_Users[k].Popularity)+ '</b>';
             user_data += '</br>';
             user_data += 'Last Activity Score: <b>' + stack_data.Top_Users[k].last_activity+ '</b>';
             user_data += '</br>';
             user_data += '<a href = "' +stack_data.Top_Users[k].link+ '" target = "_blank">Visit Profile Link</a>';
             user_data += '</td>';
             user_data += '</tr>';
           }
           $('#SOData').append(user_data);

         });
      </script>
      <script></script>
   </head>
   <body class="bodystyle">
      <h1 class="h1style">{{ language }} Analytics Page</h1>
      <div style="width: 100%; height: 100%; padding-left: 50px; padding-right: 50px; margin: 0 auto">
         <table style="width:100%; table-layout: fixed">
            <tr>
               <td height="500">
                  <p>
                  <h3 style="font-family: Trebuchet MS; font-weight: bold; color: #0288D1; padding-left: 5px" align="center">
                     StackOverflow Users
                  </h3>
                  <br>
                  <div class="list-group" style="padding-left: 20px; padding-right: 20px">
                     <table id="SOData" style="width: 100%">
                     </table>
                  </div>
                  </p>
               </td>
               <td>
                  <div align="center" style="padding-top: 16px">
                     <h3 style="font-family: Trebuchet MS; font-weight: bold; color: #0288D1; padding-left: 5px" align="center">
                        Average response time of a User
                     </h3>
                     <div class='tableauPlaceholder' id='viz1552075273966' style='position: relative;height:100% !important'>
                        <noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;re&#47;respo_python&#47;Sheet1&#47;1_rss.png' style='border: none' /></a></noscript>
                        <object class='tableauViz'  style='display:none;'>
                           <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                           <param name='embed_code_version' value='3' />
                           <param name='site_root' value='' />
                           <param name='name' value='respo_python&#47;Sheet1' />
                           <param name='tabs' value='no' />
                           <param name='toolbar' value='yes' />
                           <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;re&#47;respo_python&#47;Sheet1&#47;1.png' />
                           <param name='animate_transition' value='yes' />
                           <param name='display_static_image' value='yes' />
                           <param name='display_spinner' value='yes' />
                           <param name='display_overlay' value='yes' />
                           <param name='display_count' value='yes' />
                        </object>
                     </div>
                  </div>
               </td>
            </tr>
            <tr>
               <td>
                  <p>
                  <h3 style="font-family: Trebuchet MS; font-weight: bold; color: #0288D1; padding-left: 5px" align="center">
                     GitHub Repositories
                  </h3>
                  </br>
                  <div style="padding-left: 20px; padding-right: 20px" align="center">
                     <table id="GHData" style="width: 100%">
                     </table>
                  </div>
                  </p>
               </td>
               <td>
                  <div align="center" style="padding-top: 16px">
                     <h3 style="font-family: Trebuchet MS; font-weight: bold; color: #0288D1; padding-left: 5px">
                        Average Popularity vs Users
                     </h3>
                     <div class='tableauPlaceholder' id='viz1552075309643' style='position: relative;height: 100% !important'>
                        <noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;po&#47;pop_python&#47;Sheet2&#47;1_rss.png' style='border: none' /></a></noscript>
                        <object class='tableauViz'  style='display:none;'>
                           <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                           <param name='embed_code_version' value='3' />
                           <param name='site_root' value='' />
                           <param name='name' value='pop_python&#47;Sheet2' />
                           <param name='tabs' value='no' />
                           <param name='toolbar' value='yes' />
                           <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;po&#47;pop_python&#47;Sheet2&#47;1.png' />
                           <param name='animate_transition' value='yes' />
                           <param name='display_static_image' value='yes' />
                           <param name='display_spinner' value='yes' />
                           <param name='display_overlay' value='yes' />
                           <param name='display_count' value='yes' />
                        </object>
                     </div>
                  </div>
               </td>
            </tr>
         </table>
      </div>
      <br>
      <br>
      <div align="center" style="margin-bottom: 25px">
         <a href="/EmailSubscription" target="_blank" id="email_sub"><button type="button" class="buttonstyle btn btn-success">Subscribe</button></a>
      </div>
      <script type='text/javascript'>                    var divElement = document.getElementById('viz1552075273966');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
      <script type='text/javascript'>                   var divElement = document.getElementById('viz1552075309643');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);               </script>
   </body>
</html>